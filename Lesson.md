# Компоненти-класи

## Загальна інформація

- Згадуємо ES6 класи - конструктор, властивості, успадкування, контекст,
  публічні та статичні властивості

- Классовий компонент обов'язково успадоковується від `React.Component`

- Необхідно обов'язково оголосити метод рендер, він викликається за
  замовчуванням і повертає реакт елемент

- Доступ до пропсів через контекст

## Події у класових компонентах. Методи

- React Synhtetic Event - кросс-браузерна обгортка з такими самим інтерфейсом,
  як і у нативного івента, включно власитвості `stopPropagation()` та
  `preventDefault()` - (приклад використання `stopPropagation()` - дії з
  таблицями). При необхідності - завжди можна звернутися до `nativeEvent`.

### Обробка події

- Анонімні колбеки - бажано не використовувати ніколи, бо у більшості випадків
  знижують читабельність коду. Можливе використання у елементах, якщо це якась
  проста функція. Викликають проблеми продуктивності та зайві ререндери у
  мемоізованих компонентах

- Методи класу. Втрата контексту та його прив'язка:

1. Під час передачі
2. У конструкторі

- Публічні властивості класу

## Внутрішній стан компонента

- Динаміка реакту. Принцип взаємодії із станом компоненту. Дані відобаржають
  інтерфейс, а не навпаки (приклад - <input>)

- Односпрямований потік даних - дані йдуть вниз(від батька до сина),
  зміни(виклики функцій) - йдуть вгору(від сина до батька)

- `state` - зарезервована властивість, яка має оновлюватись тільки за допомогою
  спеціальних методів. Ця властивість має оголошуватись у конструкторі класу (не
  забуваємо про спадкування).

- Створення та оновлення будь-якої іншої властивості не викликає ре-рендеру
  компонента

- Передача даних з пропсів до стейту

  1. Що варто передавати? - лише початкове значення
  2. Треба уникати дубляжу пропсів у стані, бо оновлення пропсів не викликає
     оновлення стану, оскільки вони передаються лише при створенні екземпляру
     класу

- статична властивість `defaultProps` та `propTypes`

- Babel спрощує написання коду - можна опустити оголшення конструктора

## Зміна стану компонента - метод setState

### 2 принципи оновлення стану

    1. Передача зріза об'єкта з оновленням, який буде зрощуватись з існуючим об'єктом

    2. Передача колбеку, який приймає попередній стан як аргумент поточний стан та пропси і повертає зріз об'єкту оновлення

- Оновлення стану - це асинхронна подія, тому виклик декілької подій підряд не
  буде мати очікуваного еффекту

## Підіймання стану та передача стейту

- Реакт має однонаправленний потік даних - від верхнього компонента до нижнього,
  тому для оновлення стану з нижнього компоненту - потрідно передати йому
  коллбек, який змінить стан.
